//CharacterController.js
//Maps keyboard input to character movement.
//The character must have a rigidbody composition attached to it.
//Refer to player.js if you need to modify other properties of the player
//Remember this.base reffers to player.js
//To know what the keycode for a given key is, reffer to http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes

var Composition = require('Composition');

var CharacterController = new Composition();


//When we get a keydown signal (Happens every frame the key is held down)
CharacterController.keydown = function(key){
	if((this.base.transform.x > 10) && (this.base.transform.x < window.innerWidth - 50)) {
		if(key == 39){ //If key is right arrow
			this.base.rigidbody.speed.x = 100; //Move right
		}else if(key == 37){ //If key is left arrow
		this.base.rigidbody.speed.x = -100; //Move left
		}
	}else {
		if(this.base.transform.x < 10){
			if(key == 39){ //If key is right arrow
				this.base.rigidbody.speed.x = 100; //Move right
			}else if(key == 37){ //If key is left arrow
			this.base.rigidbody.speed.x = 0; //Move left
			}
		}else if(this.base.transform.x > window.innerWidth - 50 ){
			if(key == 39){ //If key is right arrow
				this.base.rigidbody.speed.x = 0; //Move right
			}else if(key == 37){ //If key is left arrow
				this.base.rigidbody.speed.x = -100; //Move left
			}
		}
	}

}

// //When we get a keypress signal (Only happens once a key is pressed)
// CharacterController.keypress = function(key){
// 	if(key==32){//If the spacebar is pressed
// 		this.base.rigidbody.speed.y = -50; //Jump
// 	}
// }

//When we get a keyup signal (Once a key is released)
CharacterController.keyup = function(key){
	if(key==39 || key==37){//If we release left or right arrow, stop moving
		this.base.rigidbody.speed.x = 0;
	}
}

module.exports = CharacterController;