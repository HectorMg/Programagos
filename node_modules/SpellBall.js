var Composition = require("Composition");
var testController = require("testController");
var Rigidbody = require("Rigidbody");
var VertexRenderer = require("VertexRenderer");
var Vertices = require("Vertices");
var Transform = require("Transform");
var TerrainDestroyer = require("TerrainDestroyer");
var Vec2 = require('vec2');
var Circle = require('Circle');
var LifeComponent = require("LifeComponent");


module.exports = function(){
	var SpellBall = new Composition(
		'transform', Transform(200,100),
		'rigidbody', Rigidbody(),
		'renderer', VertexRenderer(new Vertices(Circle(10,10))),
		'destroyer', TerrainDestroyer(),
		'life', LifeComponent(2000)
	);

	SpellBall.start = function(){
		this.components.renderer.static = false;
		this.components.rigidbody.acceleration.y = 100;
	}
	SpellBall.update = function(){
		if(this.components.life.life <= 0){
			this.destroy();
			this.base.turnManager.nextTurn();
		}
	}

	return SpellBall
}