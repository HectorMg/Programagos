//Create start level
var Composition = require('Composition');
var terrain = require('terrain');
var Player = require('player');
var sky = require('sky');
var sun = require('sun');
var TurnManager = require('TurnManager');
var SpellBall = require('SpellBall');
var BackgroundMusic = require('BackgroundMusic');
var Pauser = require('Pauser');
var CollisionManager = require('CollisionManager');
var EditorOpener = require("EditorOpener");

module.exports = function(){

	var playerNames = arguments;
	var playerImages = ["resources/player1.png",
						"resources/player2.png"];

	var MainLevel = new Composition(
		'sun', sun(),
		'sky', sky(),
		'terrain', terrain(),
		'turnManager', TurnManager(),
		'BackgroundMusic', BackgroundMusic("resources/track.ogg"),
		'Pauser', Pauser(),
		'collisionManager', CollisionManager(),
		'editorOpener', EditorOpener()
	);

	MainLevel.start = function(){

		// for(var i = 0; i < playerNames.length; i++){
		// 	//choose random player image
		// 	var img = playerImages[Math.floor((Math.random()*(playerImages.length)))];
		// 	var player = Player(Math.random()*740+10, //player x pos
		// 						100, // player y pos
		// 						img, //player image
		// 						playerNames[i] //player name
		// 					   );
		//
		// 	this.add(playerNames[i], player);
		// 	this.components.turnManager.addPlayers(player);
		// 	this.components.collisionManager.addPlayers(player);
		// }

		//Std player 1
		var player1 = Player(50, 100, playerImages[0], playerNames[0]);
		this.add(playerNames[0], player1);
		this.components.turnManager.addPlayers(player1);
		this.components.collisionManager.addPlayers(player1);

		//Std player 2
		var player2 = Player(750, 100, playerImages[1], playerNames[1]);
		this.add(playerNames[1], player2);
		this.components.turnManager.addPlayers(player2);
		this.components.collisionManager.addPlayers(player2);

	}

	return MainLevel;
}
