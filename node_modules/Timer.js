var Composition = require("Composition");
var LifeComponent = require("LifeComponent");
var Transform = require("Transform");

module.exports = function(timeLimit){
	var timer = new Composition(
		'transform', Transform(400,0),
		'time', LifeComponent()
	);

	timer.timeSpent = 0;
	timer.timeLimit = timeLimit;

	var timerElement;
	timer.start = function(){
		timerElement = document.getElementById("timer");
	}

	timer.update = function(deltaTime){
		this.timeSpent += deltaTime;
		this.base.time.percentage = 1 - this.timeSpent/this.timeLimit;
		if(timerElement!=null){
			timerElement.style.width = this.base.time.percentage*100+"%";
		}
	}

	return timer;
}
