var Composition = require("Composition");
var LifeComponent = require("LifeComponent");
var Transform = require("Transform");

module.exports = function(timeLimit){
	var timer = new Composition(
		'transform', Transform(400,0),
		'timeLeft', LifeComponent()
	);

	timer.timeSpent = 0;
	timer.timeLimit = timeLimit;

	var timer;
	timer.start = function(){
		timer = document.getElementById("timer");
	}

	timer.update = function(deltaTime){
		this.timeSpent += deltaTime;
		this.components.timeLeft.percentage = 1 -this.timeSpent/this.timeLimit;
		if(timer!=null){
			timer.style.width = this.components.timeLeft.percentage*10+"%";
		}
	}

	return timer;
}