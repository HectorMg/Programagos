var vm = require('vm');
var Composition = require("Composition");

module.exports = function(){
	var PlayerScriptRunner = new Composition();

	PlayerScriptRunner.runScript = function(code){
		var script = new vm.Script(code, {filename: "Player's Code"});

		var sandbox = {
			move:function(){
				console.log("move");
			},
			changeColor:function(){
				console.log("changeColor");
			},
			changeRadius:function(){
				console.log("changeRadius");
			}
		}

		var context = new vm.createContext(sandbox);

		script.runInContext(context, {timeout:200});
	}
	return PlayerScriptRunner;
}
