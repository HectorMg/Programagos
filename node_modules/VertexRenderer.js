var Composition = require('Composition');

module.exports = function(vertices){
	//Create an empty Composition
	var Renderer = new Composition();

	//Set vertices
	Renderer.vertices = vertices;

	//Mode can be either 'fill', 'stroke', or 'both'
	Renderer.mode = "fill";

	//Set default fillStyle. Can be color, gradient or pattern
	Renderer.fillStyle = "#000000";

	//Set default strokeStyle. Can be color, gradient or pattern
	Renderer.strokeStyle = "#000000";

	//Set default lineWidth to 1px;
	Renderer.lineWidth = 1;

	Renderer.draw = function(context){
		context.beginPath();

		//Move to starting position
		context.moveTo(this.vertices[0].x+this.base.transform.x, this.vertices[0].y+this.base.transform.y);
		
		//Make a line to the next vertex
		for(var vertex = 1; vertex < this.vertices.length; vertex++){
			context.lineTo(this.vertices[vertex].x+this.base.transform.x, this.vertices[vertex].y+this.base.transform.y);
		}


		if(this.mode=="fill"){
			context.fillStyle = this.fillStyle;
			context.fill();
		}else if(this.mode=="stroke"){
			context.strokeStyle = this.strokeStyle;
			context.lineWidth = this.lineWidth;
			context.stroke();
		}else if(this.mode=="both"){
			context.fillStyle = this.fillStyle;
			context.fill();
			context.strokeStyle = this.strokeStyle;
			context.lineWidth = this.lineWidth;
			context.stroke();
		}
	}
	
	//Return the created Composition
	return Renderer;
}