var Composition = require('Composition');
var Transform = require('Transform');
var Canvas = require('Canvas');

module.exports = function(playerName){

  var Text = new Composition(
    'transform', Transform(0, 20)
  );
  //Create a new canvas and set the zIndex
  Text.canvas = new Canvas();
  Text.canvas.setZIndex(-1);

  //Create a label
  Text.text = playerName;

  Text.draw = function(){
    //Draw text at coordinates given in the Transform component
    this.canvas.context.fillText(this.text, this.components.transform.position.x, this.components.transform.position.y);
    // console.log("Test sun: " + JSON.stringify(this.base.transform.position.x));
  }
  Text.clear = function(){
    //Clear previous draw
    this.canvas.context.globalCompositeOperation = 'source-out';
    this.canvas.context.fillText(this.text, this.components.transform.position.x, this.components.transform.position.y);
    this.canvas.context.globalCompositeOperation = "source-over";
  }

  Text.exit = function(){
    this.canvas.destroy();
  }

  return Text;
}
