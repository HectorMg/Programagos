var Composition = require('Composition');
var Vec2 = require('vec2');

module.exports = function(){
	var Controller = new Composition();


	var direction = new Vec2(0,0);
	Controller.keydown = function(key){
		//left 37
		//up  38
		//right 39
		//down 40
		if(key==37){
			direction.x=-1;
		}else if(key==38){
			direction.y=-1;
		}
		else if(key==39){
			direction.x=1;
		}
		else if(key==40){
			direction.y=1;
		}
	}
	Controller.update = function(){
		this.base.rigidbody.acceleration = direction.normalize(true);
		this.base.rigidbody.acceleration.multiply(300);
	}

	Controller.keyup = function(key){
		if(key==37 || key==39){
			direction.x=0;
		}else if(key==38 || key==40){
			direction.y=0;
		}

		if(direction.x==0 && direction.y==0){
			this.base.rigidbody.speed.zero();
		}
	}

	return Controller;
}