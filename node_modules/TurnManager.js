var Composition = require('Composition');
var Vec2 = require('vec2');

module.exports = function(){

	var TurnManager = new Composition();

	var players = arguments;

	TurnManager.start = function(){
		this.players = players;
		this.activePlayer = 0;

		this.players[0].setActive(true);
		for(var player = 1; player<this.players.length; player++){
			this.players[player].setActive(false);
		}
	}

	TurnManager.nextTurn = function(){
		this.players[this.activePlayer].setActive(false);
		this.players[this.activePlayer].components.rigidbody.speed = new Vec2(0,0);
		this.activePlayer = (this.activePlayer + 1) % this.players.length;
		this.players[this.activePlayer].setActive(true);
	}

	TurnManager.keydown = function(key){
		if(key==77){
			this.players[this.activePlayer].endTurn();
		}
	}

	return TurnManager;
}
